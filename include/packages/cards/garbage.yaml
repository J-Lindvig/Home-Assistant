garbage:
  garbage_collection:
    sensors:
      - name: Affald normal
        frequency: even-weeks
        collection_days:
          - wed
        move_country_holidays: DK
        expire_after: "12:00"
      - name: Affald sommer
        frequency: odd-weeks
        first_month: jul
        last_month: aug
        collection_days:
          - wed
        move_country_holidays: DK
        expire_after: "12:00"
      - name: Genbrug
        frequency: odd-weeks
        collection_days:
          - thu
        move_country_holidays: DK
        expire_after: "16:00"
      - name: Affald
        frequency: group
        entities:
          - sensor.affald_normal
          - sensor.affald_sommer

  sensor:
    - platform: template
      sensors:
        affald_hentes:
          friendly_name: "Affald:"
          icon_template: mdi:trash-can
          value_template: >-
            {% if state_attr('sensor.affald', 'days') == 0 %}
              i dag
            {%- elif state_attr('sensor.affald', 'days') == 1 %}
              i morgen
            {%- else -%}
              {% set time_stamp = as_timestamp(state_attr('sensor.affald', 'next_date') | regex_replace(":[0-9][0-9][0-9].*$","")) %}
              om {{ ((time_stamp - as_timestamp(now())) / ( 60 * 60 * 24 )) | round(0, 'ceil') }} dage (
              {{- states("var.weekdays_dk").split(",")[time_stamp | timestamp_custom('%w') | int - 1] }}dag den {{ time_stamp | timestamp_custom('%-d.') }}{{ states("var.months_dk").split(",")[time_stamp | timestamp_custom('%-m') | int - 1] }})
            {%- endif -%}
          attribute_templates:
            days: >-
              {{ state_attr('sensor.affald', 'days') }}

        genbrug_hentes:
          friendly_name: "Genbrug:"
          icon_template: mdi:recycle
          value_template: >-
            {% if state_attr('sensor.genbrug', 'days') == 0 %}
              i dag
            {%- elif state_attr('sensor.genbrug', 'days') == 1 %}
              i morgen
            {%- else -%}
              {% set time_stamp = as_timestamp(state_attr('sensor.genbrug', 'next_date') | regex_replace(":[0-9][0-9][0-9].*$","")) %}
              om {{ ((time_stamp - as_timestamp(now())) / ( 60 * 60 * 24 )) | round(0, 'ceil') }} dage (
              {{- states("var.weekdays_dk").split(",")[time_stamp | timestamp_custom('%w') | int - 1] }}dag den {{ time_stamp | timestamp_custom('%-d.') }}{{ states("var.months_dk").split(",")[time_stamp | timestamp_custom('%-m') | int - 1] }})
            {%- endif -%}
          attribute_templates:
            days: >-
              {{ state_attr('sensor.genbrug', 'days') }}