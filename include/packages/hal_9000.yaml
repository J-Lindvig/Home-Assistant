hal_9000:

  var:
    morning:
    greetings:
    reminder:
    trash:
    recycle:

  automation:
    - alias: "Godmorgen"
      trigger:
        - platform: time
          at: "09:00:00"
      action:
        - service: homeassistant.update_entity
          data:
            entity_id:
              - sensor.tid_naturlig

        - service: script.store_volume
          data_template:
            entity_id: media_player.kokken
            volume: 0.4

        - service: media_player.play_media
          entity_id: media_player.kokken
          data:
            media_content_id: 'http://soundbible.com/grab.php?id=1510&type=mp3'
            media_content_type: music

        - service: tts.google_translate_say
          entity_id: media_player.kokken
          data_template:
            message: >-
              {% set len = states('var.greetings').split("|") | length %}
              {% set ran_idx = range(0, len) | random() %}
              {{ states('var.greetings').split("|")[ran_idx] }}

              Det er i dag {{ state_attr('sensor.dato', 'ugedag') }} den {{ state_attr('sensor.dato', 'dato_ordenstal') }} {{ state_attr('sensor.dato', 'maaned') }}.

              Klokken er {{ states('sensor.tid_naturlig') }} og der er lige nu cirka {{ state_attr('weather.brobyvaerk', 'temperature') | round }} grader i {{ state_attr('weather.brobyvaerk', 'friendly_name') }}.

              UV-indexet nÃ¥r i dag {{ states('sensor.max_uv_index') | round(2) | replace('.', ',') }} og er hÃ¸jest klokken {{ state_attr('sensor.uv_sun', 'uv_max_natural') }} og der anbefales solcreme mellem {{ state_attr('sensor.uv_sun', 'protection_start_time_natural') }} og {{ state_attr('sensor.uv_sun', 'protection_end_time_natural') }}.

              {% set len = states('var.reminder').split("|") | length %}
              {% set ran_idx = range(0, len) | random() %}
              {{ states('var.reminder').split("|")[ran_idx] }}

              {%- if is_state_attr('sensor.affald_hentes', 'days', '1') %}
                {{ states('var.trash') }}
              {% else %}
                {{ states('var.recycle') }}
              {% endif -%}

        - service: script.reset_volume
          data_template:
            entity_id: media_player.kokken